# Atrévete Bot Product Requirements Document (PRD)

## Table of Contents

- [Atrévete Bot Product Requirements Document (PRD)](#table-of-contents)
  - [Table of Contents](./table-of-contents.md)
  - [1. Goals and Background Context](./1-goals-and-background-context.md)
    - [1.1 Goals](./1-goals-and-background-context.md#11-goals)
    - [1.2 Background Context](./1-goals-and-background-context.md#12-background-context)
    - [1.3 Change Log](./1-goals-and-background-context.md#13-change-log)
  - [2. Requirements](./2-requirements.md)
    - [2.1 Functional Requirements](./2-requirements.md#21-functional-requirements)
    - [2.2 Non-Functional Requirements](./2-requirements.md#22-non-functional-requirements)
  - [3. User Interface Design Goals](./3-user-interface-design-goals.md)
    - [3.1 Overall UX Vision](./3-user-interface-design-goals.md#31-overall-ux-vision)
    - [3.2 Key Interaction Paradigms](./3-user-interface-design-goals.md#32-key-interaction-paradigms)
    - [3.3 Core Screens and Views](./3-user-interface-design-goals.md#33-core-screens-and-views)
    - [3.4 Accessibility](./3-user-interface-design-goals.md#34-accessibility)
    - [3.5 Branding](./3-user-interface-design-goals.md#35-branding)
    - [3.6 Target Device and Platforms](./3-user-interface-design-goals.md#36-target-device-and-platforms)
  - [4. Technical Assumptions](./4-technical-assumptions.md)
    - [4.1 Repository Structure: Monorepo](./4-technical-assumptions.md#41-repository-structure-monorepo)
    - [4.2 Service Architecture: Monolith with 3 Docker Containers](./4-technical-assumptions.md#42-service-architecture-monolith-with-3-docker-containers)
    - [4.3 Testing Requirements: Full Testing Pyramid](./4-technical-assumptions.md#43-testing-requirements-full-testing-pyramid)
    - [4.4 Additional Technical Assumptions](./4-technical-assumptions.md#44-additional-technical-assumptions)
  - [5. Epic List](./5-epic-list.md)
    - [Epic 1: Foundation & Core Infrastructure](./5-epic-list.md#epic-1-foundation-core-infrastructure)
    - [Epic 2: Customer Identification & Conversational Foundation](./5-epic-list.md#epic-2-customer-identification-conversational-foundation)
    - [Epic 3: Service Discovery & Calendar Availability](./5-epic-list.md#epic-3-service-discovery-calendar-availability)
    - [Epic 4: Booking Flow & Payment Processing](./5-epic-list.md#epic-4-booking-flow-payment-processing)
    - [Epic 5: Modification & Cancellation Management](./5-epic-list.md#epic-5-modification-cancellation-management)
    - [Epic 6: Notifications & Intelligent Escalation](./5-epic-list.md#epic-6-notifications-intelligent-escalation)
    - [Epic 7: Testing, Validation & Production Hardening](./5-epic-list.md#epic-7-testing-validation-production-hardening)
  - [6. Epic Details](./6-epic-details.md)
    - [Epic 1: Foundation & Core Infrastructure](./6-epic-details.md#epic-1-foundation-core-infrastructure)
      - [Story 0.1: External Service Account Setup](./6-epic-details.md#story-01-external-service-account-setup)
      - [Story 1.1: Project Structure & Dependency Setup](./6-epic-details.md#story-11-project-structure-dependency-setup)
      - [Story 1.2: Docker Compose Multi-Container Setup](./6-epic-details.md#story-12-docker-compose-multi-container-setup)
      - [Story 1.3a: Core Database Tables & Models](./6-epic-details.md#story-13a-core-database-tables-models)
      - [Story 1.3b: Transactional & History Tables](./6-epic-details.md#story-13b-transactional-history-tables)
      - [Story 1.4: FastAPI Webhook Receiver](./6-epic-details.md#story-14-fastapi-webhook-receiver)
      - [Story 1.5: Basic LangGraph State & Echo Bot](./6-epic-details.md#story-15-basic-langgraph-state-echo-bot)
      - [Story 1.6: CI/CD Pipeline Skeleton](./6-epic-details.md#story-16-cicd-pipeline-skeleton)
    - [Epic 2: Customer Identification & Conversational Foundation](./6-epic-details.md#epic-2-customer-identification-conversational-foundation)
      - [Story 2.1: CustomerTools Implementation](./6-epic-details.md#story-21-customertools-implementation)
      - [Story 2.2: New Customer Greeting & Name Confirmation](./6-epic-details.md#story-22-new-customer-greeting-name-confirmation)
      - [Story 2.3: Returning Customer Recognition](./6-epic-details.md#story-23-returning-customer-recognition)
      - [Story 2.4: Maite System Prompt & Personality](./6-epic-details.md#story-24-maite-system-prompt-personality)
      - [Story 2.5a: Redis Checkpointing & Recent Message Memory](./6-epic-details.md#story-25a-redis-checkpointing-recent-message-memory)
      - [Story 2.5b: Conversation Summarization with Claude](./6-epic-details.md#story-25b-conversation-summarization-with-claude)
      - [Story 2.5c: PostgreSQL Archiving Worker & TTL Management](./6-epic-details.md#story-25c-postgresql-archiving-worker-ttl-management)
      - [Story 2.6: FAQ Knowledge Base Responses](./6-epic-details.md#story-26-faq-knowledge-base-responses)
    - [Epic 3: Service Discovery & Calendar Availability](./6-epic-details.md#epic-3-service-discovery-calendar-availability)
      - [Story 3.1: Service & Pack Database with Pricing Logic](./6-epic-details.md#story-31-service-pack-database-with-pricing-logic)
      - [Story 3.2: Google Calendar API Integration](./6-epic-details.md#story-32-google-calendar-api-integration)
      - [Story 3.3: Multi-Calendar Availability Checking](./6-epic-details.md#story-33-multi-calendar-availability-checking)
      - [Story 3.4: Intelligent Pack Suggestion Logic](./6-epic-details.md#story-34-intelligent-pack-suggestion-logic)
      - [Story 3.5: Free Consultation Offering for Indecisive Customers](./6-epic-details.md#story-35-free-consultation-offering-for-indecisive-customers)
      - [Story 3.6: Service Category Mixing Prevention](./6-epic-details.md#story-36-service-category-mixing-prevention)
    - [Epic 4: Booking Flow & Payment Processing](./6-epic-details.md#epic-4-booking-flow-payment-processing)
      - [Story 4.1: BookingTools - Price & Duration Calculations](./6-epic-details.md#story-41-bookingtools-price-duration-calculations)
      - [Story 4.2: Provisional Calendar Blocking with Timeouts](./6-epic-details.md#story-42-provisional-calendar-blocking-with-timeouts)
      - [Story 4.3: PaymentTools - Stripe Payment Link Generation](./6-epic-details.md#story-43-paymenttools-stripe-payment-link-generation)
      - [Story 4.4: Payment Timeout Reminder & Auto-Release Worker](./6-epic-details.md#story-44-payment-timeout-reminder-auto-release-worker)
      - [Story 4.5: Stripe Webhook Payment Confirmation](./6-epic-details.md#story-45-stripe-webhook-payment-confirmation)
      - [Story 4.6: Payment Retry Logic & Escalation](./6-epic-details.md#story-46-payment-retry-logic-escalation)
      - [Story 4.7: Group Bookings & Simultaneous Availability](./6-epic-details.md#story-47-group-bookings-simultaneous-availability)
      - [Story 4.8: Third-Party Booking Support](./6-epic-details.md#story-48-third-party-booking-support)
      - [Story 4.9: Booking Confirmation & Notifications](./6-epic-details.md#story-49-booking-confirmation-notifications)
    - [Epic 5: Modification & Cancellation Management](./6-epic-details.md#epic-5-modification-cancellation-management)
      - [Story 5.1: Appointment Modification Flow](./6-epic-details.md#story-51-appointment-modification-flow)
      - [Story 5.2: Cancellation with >24h Notice (Refund)](./6-epic-details.md#story-52-cancellation-with-24h-notice-refund)
      - [Story 5.3: Cancellation with <24h Notice (Rescheduling Offer)](./6-epic-details.md#story-53-cancellation-with-24h-notice-rescheduling-offer)
      - [Story 5.4: Customer Delay Notifications (<1h to Appointment)](./6-epic-details.md#story-54-customer-delay-notifications-1h-to-appointment)
      - [Story 5.5: "Lo de Siempre" (Usual Service) Recognition](./6-epic-details.md#story-55-lo-de-siempre-usual-service-recognition)
    - [Epic 6: Notifications & Intelligent Escalation](./6-epic-details.md#epic-6-notifications-intelligent-escalation)
      - [Story 6.1: 48-Hour Automated Reminder Worker](./6-epic-details.md#story-61-48-hour-automated-reminder-worker)
      - [Story 6.2: Same-Day Booking Urgent Notifications](./6-epic-details.md#story-62-same-day-booking-urgent-notifications)
      - [Story 6.3: Medical Consultation Escalation](./6-epic-details.md#story-63-medical-consultation-escalation)
      - [Story 6.4: Escalation Tool & Team Notification System](./6-epic-details.md#story-64-escalation-tool-team-notification-system)
      - [Story 6.5: Unresolved Ambiguity Escalation](./6-epic-details.md#story-65-unresolved-ambiguity-escalation)
      - [Story 6.6: Holiday/Closure Detection & Customer Notification](./6-epic-details.md#story-66-holidayclosure-detection-customer-notification)
    - [Epic 7: Testing, Validation & Production Hardening](./6-epic-details.md#epic-7-testing-validation-production-hardening)
      - [Story 7.1: Integration Tests for 18 Conversational Scenarios](./6-epic-details.md#story-71-integration-tests-for-18-conversational-scenarios)
      - [Story 7.2: Concurrency & Race Condition Testing](./6-epic-details.md#story-72-concurrency-race-condition-testing)
      - [Story 7.3: Security Validation & Penetration Testing](./6-epic-details.md#story-73-security-validation-penetration-testing)
      - [Story 7.4: Performance Testing & Optimization](./6-epic-details.md#story-74-performance-testing-optimization)
      - [Story 7.5: Production Environment Setup & Deployment](./6-epic-details.md#story-75-production-environment-setup-deployment)
      - [Story 7.6: Manual Stylist Validation & Soft Launch](./6-epic-details.md#story-76-manual-stylist-validation-soft-launch)
      - [Story 7.7: Monitoring Dashboard & Operational Runbook](./6-epic-details.md#story-77-monitoring-dashboard-operational-runbook)
  - [7. Checklist Results Report](./7-checklist-results-report.md)
    - [Executive Summary](./7-checklist-results-report.md#executive-summary)
    - [Category Analysis](./7-checklist-results-report.md#category-analysis)
    - [Final Decision](./7-checklist-results-report.md#final-decision)
  - [8. Next Steps](./8-next-steps.md)
    - [UX Expert Prompt](./8-next-steps.md#ux-expert-prompt)
    - [Architect Prompt](./8-next-steps.md#architect-prompt)
    - [Immediate Next Actions](./8-next-steps.md#immediate-next-actions)
    - [Project Handoff Checklist](./8-next-steps.md#project-handoff-checklist)
